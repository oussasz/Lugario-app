"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{68184:function(e,t,l){var s=l(57437);l(2265);var i=l(25125),n=l(27648),r=l(38706);t.default=e=>{let{title:t,subtitle:l,showReset:a}=e,o=(0,r.T)("Empty"),c=null!=t?t:o("noExactMatches"),d=null!=l?l:o("tryChangeFilters");return(0,s.jsxs)("div",{className:" h-[60vh] flex flex-col gap-2 justify-center items-center",children:[(0,s.jsx)(i.Z,{center:!0,title:c,subtitle:d}),(0,s.jsx)("div",{className:"w-48 mt-4",children:a&&(0,s.jsx)(n.default,{href:"/",className:"bg-white border-[1px] border-gray-500 text-[#4e4e4e] rounded hover:opacity-80 transition ",children:o("removeAllFilters")})})]})}},31451:function(e,t,l){l.d(t,{default:function(){return m}});var s=l(57437),i=l(2265),n=l(48053),r=l(69064),a=l(52884),o=l(14123),c=l.n(o),d=l(80605),u=l(20698);l(83079);var f=l(12119);(0,f.$)("001837c49f82a4a4d75b3dc0964dc6c76e2d2b77"),(0,f.$)("c1a53f0f37ee773167b45a3bf6a61b76eb07c326");var x=(0,f.$)("ab224d6a6aaea9fdd9ddb9b9a8c9dad0cd2e02f8"),m=e=>{let{listingId:t,hasFavorited:l}=e,{status:o}=(0,d.useSession)(),[f,m]=(0,i.useState)(l),p=(0,i.useRef)(l),{mutate:h}=(0,a.D)({mutationFn:x,onError:()=>{p.current=!p.current,m(p.current),r.Am.error("Failed to favorite")}}),v=c()(()=>{h({listingId:t,favorite:p.current})},300),g=(0,i.useCallback)(()=>{v()},[]);return(0,s.jsxs)("button",{type:"button",onClick:e=>{if(e.stopPropagation(),e.preventDefault(),"authenticated"!==o){r.Am.error("Please sign in to favorite the listing!");return}g(),m(e=>!e),p.current=!p.current},className:" relative hover:opacity-80 transition cursor-pointer z-[5] ",children:[(0,s.jsx)(n.lo,{size:28,className:"   text-gray-50   absolute   -top-[2px]   -right-[2px]   "}),(0,s.jsx)(n.M_L,{size:24,className:(0,u.cn)(f?"fill-rose-500":"fill-neutral-500/70")})]})}},23610:function(e,t,l){var s=l(57437),i=l(2265),n=l(33145),r=l(20698);t.default=e=>{let{imageSrc:t,fill:l=!1,alt:a,className:o,priority:c=!1,effect:d,sizes:u}=e,[f,x]=(0,i.useState)(!1);return(0,s.jsx)(n.default,{fill:l,className:(0,r.cn)("transition duration-300","zoom"===d&&"scale-95",f?"opacity-100 scale-100":"opacity-0",o),src:t,alt:a,onLoad:()=>x(!0),priority:c,sizes:u,unoptimized:!0})}},28927:function(e,t,l){l.d(t,{T:function(){return M},default:function(){return L}});var s=l(57437),i=l(2265),n=l(27648),r=l(66009),a=l(41208),o=l(69234),c=l(38706),d=l(31451),u=l(23610),f=l(20698),x=l(32970),m=l(99376),p=l(52884),h=l(69064),v=l(78076),g=l(71151),b=l(97230),j=l(64392),y=l(57212),N=e=>{let{title:t,onConfirm:l,onCloseModal:i,isLoading:n=!1}=e;return(0,s.jsxs)("div",{className:" flex flex-col gap-3 px-6 py-8 relative",children:[(0,s.jsx)("button",{type:"button",className:" p-1 border-0  hover:opacity-70 transition absolute right-3 top-3",onClick:()=>null==i?void 0:i(),children:(0,s.jsx)(b.QAE,{size:20})}),(0,s.jsx)("h1",{className:"text-[22px] font-bold text-gray-800",children:t}),(0,s.jsx)("p",{className:"text-gray-700  text-[16px] leading-[1.6] mb-4",children:"Are you sure you want to do this? It can't be undone."}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-1 h-[40px]",children:[(0,s.jsx)(j.Z,{onClick:()=>null==i?void 0:i(),className:"h-full",outline:!0,children:"Cancel"}),(0,s.jsx)(j.Z,{onClick:()=>{l(i)},className:"h-full flex items-center justify-center",children:n?(0,s.jsx)(y.Z,{}):(0,s.jsx)("span",{children:" Confirm"})})]})]})},w=l(66200),Z=l(30310),C=l(59255);let D={value:"DZ",label:"Algeria",flag:"\uD83C\uDDE9\uD83C\uDDFF"},P=e=>e?e.split(",").map(e=>e.trim()).filter(Boolean):[],z=e=>{var t;if(!e)return"";let l=C.find(t=>(null==t?void 0:t.nameFr)===e||(null==t?void 0:t.nameAr)===e);return null!==(t=null==l?void 0:l.code)&&void 0!==t?t:""};var F=e=>{let{listingId:t,onCloseModal:l}=e,[n,r]=(0,i.useTransition)(),[a,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{r(async()=>{try{var e,s,i,n,r,a,c,d,u,f,x;let l=await (0,Z.Cy)(t),m=z(l.region),p=l.latitude,h=l.longitude,v="number"==typeof p&&"number"==typeof h;o({duration:null!==(e=l.duration)&&void 0!==e?e:"",category:null!==(s=l.category)&&void 0!==s?s:"",features:P(l.features),location:v&&l.region?{...D,label:null!==(i=l.country)&&void 0!==i?i:D.label,region:l.region,latlng:[p,h]}:null,wilayaCode:m,municipality:null!==(n=l.municipality)&&void 0!==n?n:"",address:null!==(r=l.address)&&void 0!==r?r:"",guestCount:null!==(a=l.guestCount)&&void 0!==a?a:1,bathroomCount:null!==(c=l.bathroomCount)&&void 0!==c?c:1,roomCount:null!==(d=l.roomCount)&&void 0!==d?d:1,image:null!==(u=l.imageSrc)&&void 0!==u?u:"",price:null!=l.price?String(l.price):"",title:null!==(f=l.title)&&void 0!==f?f:"",description:null!==(x=l.description)&&void 0!==x?x:""})}catch(e){h.ZP.error((null==e?void 0:e.message)||"Failed to load listing"),null==l||l()}})},[t,l]);let c=(0,i.useMemo)(()=>(0,s.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,s.jsx)(g.Z.WindowHeader,{title:"Edit property"}),(0,s.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,s.jsx)(y.Z,{})})]}),[]);return a?(0,s.jsx)(w.Z,{mode:"edit",listingId:t,initialValues:a,onCloseModal:l}):c};l(83079);var T=l(12119),k=(0,T.$)("db16f98a7dd509dc43fd9fb70035dab959baf639");(0,T.$)("cac5bff2370d361859fcb45ded3a18f9feb290ff"),(0,T.$)("578785c17f7947cb2d65472cb4242c57c8621203"),(0,T.$)("1106a624fc89780734d43596a1878891b0872f57"),(0,T.$)("84b639be183e082fba4d06c9dff2f39883927b92");var S=(0,T.$)("2ad9c02f7138be20aaff203fa989dbdd2c65d88f");let E={"/properties":"Delete property","/trips":"Cancel reservation","/reservations":"Cancel guest reservation"},W=e=>e?"/"===e?"/":e.replace(/\/+$/,""):"";var $=e=>{let{id:t}=e,l=W((0,m.usePathname)()),n=l.endsWith("/favorites"),r=l.endsWith("/properties"),a=l.endsWith("/trips"),o=l.endsWith("/reservations"),c=r?E["/properties"]:a?E["/trips"]:o?E["/reservations"]:"",{mutate:d}=(0,p.D)({mutationFn:k}),{mutate:u}=(0,p.D)({mutationFn:S}),[f,b]=(0,i.useTransition)();return"/"!==l&&!n&&(r||a||o)?(0,s.jsxs)(g.Z,{children:[(0,s.jsxs)(v.Z,{children:[(0,s.jsx)(v.Z.Toggle,{id:"lisiting-menu",className:"w-10 h-10 flex items-center z-5 justify-center",children:(0,s.jsx)("button",{type:"button",className:"w-7 h-7 rounded-full bg-neutral-700/50 flex items-center justify-center hover:bg-neutral-700/70 group transition duration-200 z-[5]",children:(0,s.jsx)(x.evw,{className:"h-[18px] w-[18px] text-gray-300 transition duration-100 group-hover:text-gray-100 "})})}),(0,s.jsxs)(v.Z.List,{position:"bottom-left",className:"rounded-md",children:[r?(0,s.jsx)(g.Z.Trigger,{name:"edit-listing",children:(0,s.jsx)(v.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:"Edit property"})}):null,(0,s.jsx)(g.Z.Trigger,{name:"confirm-delete",children:(0,s.jsx)(v.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:c})})]})]}),r?(0,s.jsx)(g.Z.Window,{name:"edit-listing",children:(0,s.jsx)(F,{listingId:t})}):null,(0,s.jsx)(g.Z.Window,{name:"confirm-delete",children:(0,s.jsx)(N,{onConfirm:e=>{b(()=>{try{r?d(t,{onSuccess:()=>{null==e||e(),h.ZP.success("Listing successfully deleted!")}}):(a||o)&&u(t,{onSuccess:()=>{null==e||e(),h.ZP.success("Reservation successfully cancelled!")}})}catch(t){h.ZP.error("Oops! Something went wrong. Please try again later."),null==e||e()}})},title:c,isLoading:f})})]}):null},A=l(21099),L=e=>{let t,{data:l,reservation:i,hasFavorited:a}=e,x=(0,o.bU)(),m=(0,c.T)("Listing"),p=(0,c.T)("PurposeOptions"),h=i?i.totalPrice:null==l?void 0:l.price;if(i){let e=new Date(i.startDate),l=new Date(i.endDate);t="".concat((0,r.WU)(e,"PP")," - ").concat((0,r.WU)(l,"PP"))}let v=(()=>{let e=A.KP.find(e=>e.label===l.category);return e?p("".concat(e.id,".label")):l.category})();return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"absolute top-0 left-0 p-3 flex items-center justify-between w-full",children:[(0,s.jsx)("div",{className:"z-5",children:(0,s.jsx)($,{id:(null==i?void 0:i.id)||l.id})}),(0,s.jsx)("div",{className:"w-[28px] h-[28px] flex items-center justify-center",children:(0,s.jsx)(d.default,{listingId:l.id,hasFavorited:a},l.id)})]}),(0,s.jsx)(n.default,{href:"/listings/".concat(l.id),className:"col-span-1 cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,s.jsx)("div",{className:" overflow-hidden md:rounded-xl rounded-md",children:(0,s.jsx)("div",{className:"aspect-[1/0.95] relative bg-gray-100",children:(0,s.jsx)(u.default,{imageSrc:l.imageSrc,fill:!0,alt:l.title,effect:"zoom",className:"object-cover",sizes:"100vw"})})}),(0,s.jsxs)("span",{className:"font-semibold text-[16px] mt-[4px]",children:[null==l?void 0:l.region,", ",null==l?void 0:l.country]}),(0,s.jsx)("span",{className:"font-light text-neutral-500 text-sm",children:t||v}),(0,s.jsxs)("div",{className:"flex flex-row items-baseline gap-1",children:[(0,s.jsxs)("span",{className:"font-bold text-[#444] text-[14px]",children:["DZD ",(0,f.T)(h,x)]}),!i&&(0,s.jsx)("span",{className:"font-light",children:(()=>{switch(l.duration){case"byNight":default:return m("night");case"perWeek":return m("week");case"perMonth":return m("month");case"longTerm":return m("longTerm")}})()})]})]})})]})};let M=()=>(0,s.jsx)("div",{className:"col-span-1 ",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,s.jsx)(a.Z,{width:"100%",height:"100%",borderRadius:"12px",className:"aspect-square"}),(0,s.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,s.jsx)(a.Z,{height:"18px",width:"84px"}),(0,s.jsx)(a.Z,{height:"18px",width:"84px"})]}),(0,s.jsx)(a.Z,{height:"16px",width:"102px"}),(0,s.jsx)(a.Z,{height:"18px",width:"132px"})]})})}}]);