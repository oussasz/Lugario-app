"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{40780:function(e,t,l){l.d(t,{default:function(){return p}});var a=l(57437),n=l(2265),s=l(99376),r=l(19764),i=l(14435),o=l(79118),u=l.n(o);l(7354);var c=l(38706),d=l(78062),x=e=>{let{icon:t,label:l,displayLabel:n,selected:r,queryKey:i="category"}=e,o=(0,s.useRouter)(),u=(0,s.useSearchParams)();return(0,a.jsxs)("button",{type:"button",onClick:()=>{let e={};u&&(e=d.Z.parse(u.toString()));let t=e[i],a=Array.isArray(t)?t:"string"==typeof t?[t]:[],n=a.includes(l)?a.filter(e=>e!==l):[...a,l],s={...e,[i]:n.length?n:void 0};n.length||delete s[i];let r=d.Z.stringifyUrl({url:"/",query:s},{skipNull:!0});o.push(r)},className:"group flex flex-col max-w-fit items-center justify-center gap-2 p-2 border-b-2 transition-all duration-200 cursor-pointer text-[20px] md:text-[24px] hover:text-rose-500 ".concat(r?"border-b-rose-500 text-rose-500":"border-transparent text-neutral-500"),children:[(0,a.jsx)("span",{className:"transition-all duration-200 ease-out group-hover:scale-[1.4] group-hover:text-rose-500",children:(0,a.jsx)(t,{})}),(0,a.jsx)("small",{className:"font-medium md:text-[13.75px] text-[12.75px] select-none",children:null!=n?n:l})]})},m=l(21099),p=()=>{var e,t,l;let o=(0,c.T)("Categories"),d=(0,c.T)("DurationOptions"),p=(0,c.T)("PurposeOptions"),f=(0,c.T)("FeatureOptions"),[h,b]=(0,n.useState)(!1),y=(0,s.useSearchParams)(),g=(0,s.usePathname)(),v=null!==(e=null==y?void 0:y.getAll("category"))&&void 0!==e?e:[],w=null!==(t=null==y?void 0:y.getAll("duration"))&&void 0!==t?t:[],j=null!==(l=null==y?void 0:y.getAll("feature"))&&void 0!==l?l:[],N=(0,n.useRef)(null),C=(0,n.useRef)(null),D=(0,n.useRef)(null),k=(0,n.useRef)(null),S=(0,n.useRef)(!1),P=(0,n.useCallback)(e=>{var t;if(!(null==e?void 0:e.el)||!(null==e?void 0:null===(t=e.slides)||void 0===t?void 0:t.length))return;let l=e.el.getBoundingClientRect();e.slides.forEach(e=>{let t=e.firstElementChild;if(!t)return;let a=e.getBoundingClientRect(),n=a.left+a.width/2,s=Math.min(n-l.left,l.right-n);if(s<150){let e=s/150;t.style.opacity=String(e),t.style.transform="scale(".concat(e,")")}else t.style.opacity="1",t.style.transform="scale(1)";t.style.transformOrigin="center",t.style.willChange="transform, opacity"})},[]),R=(0,n.useCallback)(e=>{null===N.current&&(N.current=window.requestAnimationFrame(()=>{N.current=null,P(e)}))},[P]),E=(0,n.useCallback)(e=>{var t;let l=C.current;l&&(l.params.speed=e,(null===(t=l.autoplay)||void 0===t?void 0:t.running)&&(l.autoplay.stop(),l.autoplay.start()))},[]),T=(0,n.useCallback)(()=>{S.current||(S.current=!0,E(2500))},[2500,E]),M=(0,n.useCallback)(()=>{S.current&&(S.current=!1,E(8e3))},[8e3,E]);return((0,n.useEffect)(()=>()=>{null!==N.current&&window.cancelAnimationFrame(N.current),null!==k.current&&window.cancelAnimationFrame(k.current)},[]),(0,n.useEffect)(()=>{let e=u()(()=>{window.scrollY>0?b(!0):b(!1)},150);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),"/"!==g)?null:(0,a.jsx)("div",{className:" ".concat(h?"shadow-md shadow-[rgba(0,0,0,.045)]":""," transition-all duration-150"),children:(0,a.jsx)("div",{ref:D,className:"relative overflow-hidden",onMouseMove:e=>{let t=window.innerWidth,l=e.clientX,a=t/3;l<a||l>t-a?T():M()},onMouseLeave:()=>M(),children:(0,a.jsxs)(r.tq,{slidesPerView:"auto",loop:!0,speed:8e3,autoplay:{delay:0,disableOnInteraction:!1,pauseOnMouseEnter:!1},modules:[i.pt],pagination:{clickable:!0},watchSlidesProgress:!0,onInit:e=>{C.current=e,R(e)},onSetTranslate:e=>R(e),onProgress:e=>R(e),onResize:e=>R(e),className:"categories-ribbon-swiper mt-2 lg:!px-3 !px-2",children:[(0,a.jsx)(r.o5,{className:"max-w-fit",children:(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-neutral-500 select-none",children:o("duration")})},"group-duration"),m.z3.map(e=>(0,a.jsx)(r.o5,{className:"max-w-fit",children:(0,a.jsx)(x,{label:e.label,displayLabel:d("".concat(e.id,".label")),icon:e.icon,queryKey:"duration",selected:w.includes(e.label)})},"duration-".concat(e.label))),(0,a.jsx)(r.o5,{className:"max-w-fit",children:(0,a.jsx)("div",{className:"h-8 w-px bg-neutral-200 my-2 mx-2"})},"divider-1"),(0,a.jsx)(r.o5,{className:"max-w-fit",children:(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-neutral-500 select-none",children:o("purpose")})},"group-purpose"),m.KP.map(e=>(0,a.jsx)(r.o5,{className:"max-w-fit",children:(0,a.jsx)(x,{label:e.label,displayLabel:p("".concat(e.id,".label")),icon:e.icon,queryKey:"category",selected:v.includes(e.label)})},"purpose-".concat(e.label))),(0,a.jsx)(r.o5,{className:"max-w-fit",children:(0,a.jsx)("div",{className:"h-8 w-px bg-neutral-200 my-2 mx-2"})},"divider-2"),(0,a.jsx)(r.o5,{className:"max-w-fit",children:(0,a.jsx)("div",{className:"px-3 py-2 text-xs font-semibold text-neutral-500 select-none",children:o("features")})},"group-features"),m.W$.map(e=>(0,a.jsx)(r.o5,{className:"max-w-fit",children:(0,a.jsx)(x,{label:e.label,displayLabel:f("".concat(e.id,".label")),icon:e.icon,queryKey:"feature",selected:j.includes(e.label)})},"feature-".concat(e.label)))]})})})}},88967:function(e,t,l){l.d(t,{default:function(){return j}});var a=l(57437),n=l(2265),s=l(31303),r=l(99376),i=l(5674),o=l(38706),u=l(27648),c=l(78062),d=l(78394),x=l(72772),m=l(30166),p=l(29501),f=l(35778),h=l(97230),b=l(69234),y=l(64392),g=l(20377);let v=(0,m.default)(()=>Promise.all([l.e(38),l.e(903),l.e(659)]).then(l.bind(l,14659)),{loadableGenerated:{webpack:()=>[14659]},ssr:!1});function w(e){let{mode:t,onClose:l}=e,s=(0,o.T)("SearchModal"),i=(0,b.bU)(),u=(0,r.useRouter)(),d=(0,r.useSearchParams)(),x=(0,n.useMemo)(()=>d?c.Z.parse(d.toString()):{},[d]),m=(0,n.useMemo)(()=>!!(x.startDate&&x.endDate),[x.endDate,x.startDate]),[w,j]=(0,n.useState)(m),{handleSubmit:N,setValue:C,watch:D,getValues:k}=(0,p.cI)({defaultValues:{location:null,wilayaCode:"",municipality:"",dateRange:{startDate:"string"==typeof x.startDate?new Date(x.startDate):new Date,endDate:"string"==typeof x.endDate?new Date(x.endDate):new Date,key:"selection"}}}),S=D("location"),P=D("wilayaCode"),R=D("municipality"),E=D("dateRange"),T=(e,t)=>{C(e,t,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})},M="location"===t?!!k("location"):w;return(0,a.jsxs)("div",{className:"w-full rounded-2xl border border-neutral-200 bg-white shadow-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-neutral-100",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h4",{className:"text-[15px] font-semibold text-neutral-800 truncate",children:s("location"===t?"locationTitle":"dateTitle")}),(0,a.jsx)("p",{className:"text-[12px] text-neutral-500 truncate",children:s("location"===t?"locationSubtitle":"dateSubtitle")})]}),(0,a.jsx)("button",{type:"button",className:"p-1.5 rounded-full hover:bg-neutral-100 transition",onClick:l,"aria-label":"Close",children:(0,a.jsx)(h.QAE,{size:18})})]}),(0,a.jsxs)("form",{onSubmit:N(e=>{let{dateRange:a}=e,n={...x};delete n.guestCount,delete n.roomCount,delete n.bathroomCount,"location"===t&&(n.country=null==S?void 0:S.label,n.region=null==S?void 0:S.region,n.municipality=R||void 0,n.wilayaCode=P||void 0),"date"===t&&w&&((null==a?void 0:a.startDate)&&(n.startDate=(0,f.c)(a.startDate)),(null==a?void 0:a.endDate)&&(n.endDate=(0,f.c)(a.endDate)));let s=c.Z.stringifyUrl({url:"/offers",query:n},{skipNull:!0});l(),u.push(s)}),children:[(0,a.jsx)("div",{className:"p-4",children:"date"===t?(0,a.jsx)("div",{className:"h-[348px] w-full",children:(0,a.jsx)(v,{onChange:(e,t)=>{j(!0),T(e,t)},value:E})}):(0,a.jsx)("div",{className:"flex flex-col gap-4",children:(0,a.jsx)(g.Z,{wilayaCode:P,municipality:R,onChange:T,language:"ar"===i?"ar":"fr"})})}),(0,a.jsx)("div",{className:"px-4 pb-4",children:(0,a.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,a.jsx)(y.Z,{type:"submit",disabled:!M,children:s("search")})})})]})]})}var j=()=>{let e=(0,o.T)("Search"),t=(0,r.useSearchParams)(),[l,m]=(0,n.useState)(null),p=null!==l,{ref:f}=(0,d.O)({action:()=>m(null),enable:p});(0,x.K)({key:"Escape",action:()=>m(null),enable:p});let h=null==t?void 0:t.get("country"),b=null==t?void 0:t.get("region"),y=null==t?void 0:t.get("municipality"),g=null==t?void 0:t.get("startDate"),v=null==t?void 0:t.get("endDate"),j=(0,n.useMemo)(()=>{if(g&&v){let t=new Date(g),l=new Date(v),a=(0,s.j)(l,t);return 0===a&&(a=1),e("days",{count:a})}return e("anyWeek")},[v,g,e]),N=(0,n.useMemo)(()=>{let e=t?c.Z.parse(t.toString()):{};return delete e.guestCount,delete e.roomCount,delete e.bathroomCount,c.Z.stringifyUrl({url:"/offers",query:e},{skipNull:!0})},[t]);return(0,a.jsxs)("div",{ref:f,className:"relative",children:[(0,a.jsx)("div",{className:"border-[1px] w-full md:w-auto py-2 rounded-full shadow-sm hover:shadow-md transition duration-300 bg-white",children:(0,a.jsxs)("div",{className:"flex flex-row items-center w-full",children:[(0,a.jsx)("button",{type:"button",className:"flex-1 min-w-0 text-left px-4 sm:px-6 cursor-pointer",onClick:()=>m(e=>"location"===e?null:"location"),"aria-expanded":"location"===l,children:(0,a.jsx)("small",{className:"block text-sm font-bold text-[#585858] truncate",children:y||b||h||e("searchByLocation")})}),(0,a.jsxs)("button",{type:"button",className:"flex items-center gap-2 px-3 sm:px-6 border-l-[1px] border-neutral-200 cursor-pointer",onClick:()=>m(e=>"date"===e?null:"date"),"aria-expanded":"date"===l,children:[(0,a.jsx)(i.Pll,{className:"text-[14px] text-[#585858] sm:hidden"}),(0,a.jsx)("small",{className:"hidden sm:block text-sm font-bold text-[#585858] whitespace-nowrap",children:j})]}),(0,a.jsx)("div",{className:"pl-3 pr-2",children:(0,a.jsx)(u.default,{href:N,className:"p-2 bg-rose-500 rounded-full text-white inline-flex","aria-label":e("goToOffers"),onClick:()=>m(null),children:(0,a.jsx)(i.U41,{className:"text-[12px]"})})})]})}),l?(0,a.jsx)("div",{className:"absolute left-0 right-0 top-full mt-3 z-50",children:(0,a.jsx)(w,{mode:l,onClose:()=>m(null)})}):null]})}}}]);