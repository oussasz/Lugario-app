"use strict";exports.id=787,exports.ids=[787],exports.modules={8825:(e,t,a)=>{a.d(t,{default:()=>n});var s=a(10326);a(17577);var r=a(89254),i=a(90434),l=a(6162);let n=({title:e,subtitle:t,showReset:a})=>{let n=(0,l.T)("Empty"),d=e??n("noExactMatches"),o=t??n("tryChangeFilters");return(0,s.jsxs)("div",{className:" h-[60vh] flex flex-col gap-2 justify-center items-center",children:[s.jsx(r.Z,{center:!0,title:d,subtitle:o}),s.jsx("div",{className:"w-48 mt-4",children:a&&s.jsx(i.default,{href:"/",className:"bg-white border-[1px] border-gray-500 text-[#4e4e4e] rounded hover:opacity-80 transition ",children:n("removeAllFilters")})})]})}},82005:(e,t,a)=>{a.d(t,{default:()=>p});var s=a(10326),r=a(17577),i=a(67765),l=a(40381),n=a(45204),d=a(97964),o=a.n(d),c=a(77109),u=a(52117);a(15424);var f=a(46242);(0,f.$)("001837c49f82a4a4d75b3dc0964dc6c76e2d2b77"),(0,f.$)("c1a53f0f37ee773167b45a3bf6a61b76eb07c326");var x=(0,f.$)("ab224d6a6aaea9fdd9ddb9b9a8c9dad0cd2e02f8");let p=({listingId:e,hasFavorited:t})=>{let{status:a}=(0,c.useSession)(),[d,f]=(0,r.useState)(t),p=(0,r.useRef)(t),{mutate:m}=(0,n.D)({mutationFn:x,onError:()=>{p.current=!p.current,f(p.current),l.Am.error("Failed to favorite")}}),h=o()(()=>{m({listingId:e,favorite:p.current})},300),g=(0,r.useCallback)(()=>{h()},[]);return(0,s.jsxs)("button",{type:"button",onClick:e=>{if(e.stopPropagation(),e.preventDefault(),"authenticated"!==a){l.Am.error("Please sign in to favorite the listing!");return}g(),f(e=>!e),p.current=!p.current},className:" relative hover:opacity-80 transition cursor-pointer z-[5] ",children:[s.jsx(i.lo,{size:28,className:"   text-gray-50   absolute   -top-[2px]   -right-[2px]   "}),s.jsx(i.M_L,{size:24,className:(0,u.cn)(d?"fill-rose-500":"fill-neutral-500/70")})]})}},10307:(e,t,a)=>{a.d(t,{default:()=>n});var s=a(10326),r=a(17577),i=a(46226),l=a(52117);let n=({imageSrc:e,fill:t=!1,alt:a,className:n,priority:d=!1,effect:o,sizes:c})=>{let[u,f]=(0,r.useState)(!1);return s.jsx(i.default,{fill:t,className:(0,l.cn)("transition duration-300","zoom"===o&&"scale-95",u?"opacity-100 scale-100":"opacity-0",n),src:e,alt:a,onLoad:()=>f(!0),priority:d,sizes:c,unoptimized:!0})}},54655:(e,t,a)=>{a.d(t,{T:()=>W,default:()=>A});var s=a(10326),r=a(17577),i=a(90434),l=a(3474),n=a(3778),d=a(34643),o=a(6162),c=a(82005),u=a(10307),f=a(52117),x=a(66373),p=a(35047),m=a(45204),h=a(40381),g=a(90329),b=a(60132),v=a(94752),j=a(97862),y=a(13192);let w=({title:e,onConfirm:t,onCloseModal:a,isLoading:r=!1})=>(0,s.jsxs)("div",{className:" flex flex-col gap-3 px-6 py-8 relative",children:[s.jsx("button",{type:"button",className:" p-1 border-0  hover:opacity-70 transition absolute right-3 top-3",onClick:()=>a?.(),children:s.jsx(v.QAE,{size:20})}),s.jsx("h1",{className:"text-[22px] font-bold text-gray-800",children:e}),s.jsx("p",{className:"text-gray-700  text-[16px] leading-[1.6] mb-4",children:"Are you sure you want to do this? It can't be undone."}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-1 h-[40px]",children:[s.jsx(j.Z,{onClick:()=>a?.(),className:"h-full",outline:!0,children:"Cancel"}),s.jsx(j.Z,{onClick:()=>{t(a)},className:"h-full flex items-center justify-center",children:r?s.jsx(y.Z,{}):s.jsx("span",{children:" Confirm"})})]})]});var N=a(92441),I=a(51327),C=a(2209);let Z={value:"DZ",label:"Algeria",flag:"\uD83C\uDDE9\uD83C\uDDFF"},E=e=>e?e.split(",").map(e=>e.trim()).filter(Boolean):[],D=e=>{if(!e)return"";let t=C.find(t=>t?.nameFr===e||t?.nameAr===e);return t?.code??""},P=({listingId:e,onCloseModal:t})=>{let[a,i]=(0,r.useTransition)(),[l,n]=(0,r.useState)(null);(0,r.useEffect)(()=>{i(async()=>{try{let t=await (0,I.Cy)(e),a=D(t.region),s=t.latitude,r=t.longitude,i="number"==typeof s&&"number"==typeof r;n({duration:t.duration??"",category:t.category??"",features:E(t.features),location:i&&t.region?{...Z,label:t.country??Z.label,region:t.region,latlng:[s,r]}:null,wilayaCode:a,municipality:t.municipality??"",address:t.address??"",guestCount:t.guestCount??1,bathroomCount:t.bathroomCount??1,roomCount:t.roomCount??1,image:t.imageSrc??"",price:null!=t.price?String(t.price):"",title:t.title??"",description:t.description??""})}catch(e){h.ZP.error(e?.message||"Failed to load listing"),t?.()}})},[e,t]);let d=(0,r.useMemo)(()=>(0,s.jsxs)("div",{className:"w-full h-full flex flex-col",children:[s.jsx(b.Z.WindowHeader,{title:"Edit property"}),s.jsx("div",{className:"p-6 flex items-center justify-center",children:s.jsx(y.Z,{})})]}),[]);return l?s.jsx(N.Z,{mode:"edit",listingId:e,initialValues:l,onCloseModal:t}):d};a(15424);var S=a(46242),T=(0,S.$)("db16f98a7dd509dc43fd9fb70035dab959baf639");(0,S.$)("cac5bff2370d361859fcb45ded3a18f9feb290ff"),(0,S.$)("578785c17f7947cb2d65472cb4242c57c8621203"),(0,S.$)("1106a624fc89780734d43596a1878891b0872f57"),(0,S.$)("84b639be183e082fba4d06c9dff2f39883927b92");var z=(0,S.$)("2ad9c02f7138be20aaff203fa989dbdd2c65d88f");let $={"/properties":"Delete property","/trips":"Cancel reservation","/reservations":"Cancel guest reservation"},F=e=>e?"/"===e?"/":e.replace(/\/+$/,""):"",L=({id:e})=>{let t=F((0,p.usePathname)()),a=t.endsWith("/favorites"),i=t.endsWith("/properties"),l=t.endsWith("/trips"),n=t.endsWith("/reservations"),d=i?$["/properties"]:l?$["/trips"]:n?$["/reservations"]:"",{mutate:o}=(0,m.D)({mutationFn:T}),{mutate:c}=(0,m.D)({mutationFn:z}),[u,f]=(0,r.useTransition)();return"/"!==t&&!a&&(i||l||n)?(0,s.jsxs)(b.Z,{children:[(0,s.jsxs)(g.Z,{children:[s.jsx(g.Z.Toggle,{id:"lisiting-menu",className:"w-10 h-10 flex items-center z-5 justify-center",children:s.jsx("button",{type:"button",className:"w-7 h-7 rounded-full bg-neutral-700/50 flex items-center justify-center hover:bg-neutral-700/70 group transition duration-200 z-[5]",children:s.jsx(x.evw,{className:"h-[18px] w-[18px] text-gray-300 transition duration-100 group-hover:text-gray-100 "})})}),(0,s.jsxs)(g.Z.List,{position:"bottom-left",className:"rounded-md",children:[i?s.jsx(b.Z.Trigger,{name:"edit-listing",children:s.jsx(g.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:"Edit property"})}):null,s.jsx(b.Z.Trigger,{name:"confirm-delete",children:s.jsx(g.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:d})})]})]}),i?s.jsx(b.Z.Window,{name:"edit-listing",children:s.jsx(P,{listingId:e})}):null,s.jsx(b.Z.Window,{name:"confirm-delete",children:s.jsx(w,{onConfirm:t=>{f(()=>{try{i?o(e,{onSuccess:()=>{t?.(),h.ZP.success("Listing successfully deleted!")}}):(l||n)&&c(e,{onSuccess:()=>{t?.(),h.ZP.success("Reservation successfully cancelled!")}})}catch(e){h.ZP.error("Oops! Something went wrong. Please try again later."),t?.()}})},title:d,isLoading:u})})]}):null};var _=a(63347);let A=({data:e,reservation:t,hasFavorited:a})=>{let r;let n=(0,d.bU)(),x=(0,o.T)("Listing"),p=(0,o.T)("PurposeOptions"),m=t?t.totalPrice:e?.price;if(t){let e=new Date(t.startDate),a=new Date(t.endDate);r=`${(0,l.WU)(e,"PP")} - ${(0,l.WU)(a,"PP")}`}let h=(()=>{let t=_.KP.find(t=>t.label===e.category);return t?p(`${t.id}.label`):e.category})();return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"absolute top-0 left-0 p-3 flex items-center justify-between w-full",children:[s.jsx("div",{className:"z-5",children:s.jsx(L,{id:t?.id||e.id})}),s.jsx("div",{className:"w-[28px] h-[28px] flex items-center justify-center",children:s.jsx(c.default,{listingId:e.id,hasFavorited:a},e.id)})]}),s.jsx(i.default,{href:`/listings/${e.id}`,className:"col-span-1 cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[s.jsx("div",{className:" overflow-hidden md:rounded-xl rounded-md",children:s.jsx("div",{className:"aspect-[1/0.95] relative bg-gray-100",children:s.jsx(u.default,{imageSrc:e.imageSrc,fill:!0,alt:e.title,effect:"zoom",className:"object-cover",sizes:"100vw"})})}),(0,s.jsxs)("span",{className:"font-semibold text-[16px] mt-[4px]",children:[e?.region,", ",e?.country]}),s.jsx("span",{className:"font-light text-neutral-500 text-sm",children:r||h}),(0,s.jsxs)("div",{className:"flex flex-row items-baseline gap-1",children:[(0,s.jsxs)("span",{className:"font-bold text-[#444] text-[14px]",children:["DZD ",(0,f.T)(m,n)]}),!t&&s.jsx("span",{className:"font-light",children:x("night")})]})]})})]})},W=()=>s.jsx("div",{className:"col-span-1 ",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[s.jsx(n.Z,{width:"100%",height:"100%",borderRadius:"12px",className:"aspect-square"}),(0,s.jsxs)("div",{className:"flex flex-row gap-3",children:[s.jsx(n.Z,{height:"18px",width:"84px"}),s.jsx(n.Z,{height:"18px",width:"84px"})]}),s.jsx(n.Z,{height:"16px",width:"102px"}),s.jsx(n.Z,{height:"18px",width:"132px"})]})})},71539:(e,t,a)=>{a.d(t,{Z:()=>s});let s=(0,a(68570).createProxy)(String.raw`/home/oussasz/Project/Dz Dari/lugario/components/EmptyState.tsx#default`)},79687:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(68570);let r=(0,s.createProxy)(String.raw`/home/oussasz/Project/Dz Dari/lugario/components/ListingCard.tsx#default`);(0,s.createProxy)(String.raw`/home/oussasz/Project/Dz Dari/lugario/components/ListingCard.tsx#ListingSkeleton`)},41183:(e,t,a)=>{a.r(t),a.d(t,{$$ACTION_0:()=>o,$$ACTION_1:()=>u,$$ACTION_2:()=>x,getFavoriteListings:()=>f,getFavorites:()=>d,updateFavorite:()=>c});var s=a(24330);a(60166);var r=a(9487),i=a(84848),l=a(57708),n=a(40618);let d=(0,s.j)("573aee30d49bf9c1a8aea2c43b09b3a41110c6c2",o);async function o(){try{let e=await (0,i.t)();if(!e)return[];return(await r.db.favorite.findMany({where:{userId:e.id},select:{listingId:!0}})).map(e=>e.listingId)}catch(e){return[]}}let c=(0,s.j)("476c2e271afa7809c316ac65717a0cf700a3d3d8",u);async function u({listingId:e,favorite:t}){try{let a;if(!e||"string"!=typeof e)throw Error("Invalid ID");let s=await (0,i.t)();if(!s)throw Error("Please sign in to favorite the listing!");return t?(await r.db.favorite.upsert({where:{userId_listingId:{userId:s.id,listingId:e}},create:{userId:s.id,listingId:e},update:{}}),a=!0):(await r.db.favorite.deleteMany({where:{userId:s.id,listingId:e}}),a=!1),(0,l.revalidatePath)("/"),(0,l.revalidatePath)(`/listings/${e}`),(0,l.revalidatePath)("/favorites"),{hasFavorited:a}}catch(e){throw Error(e.message)}}let f=(0,s.j)("db2f0e26ed6c20fadfc94ebc5160fc769b450ad9",x);async function x(){try{let e=await (0,i.t)();if(!e)return[];return await r.db.listing.findMany({where:{favoritedBy:{some:{userId:e.id}}}})}catch(e){throw Error(e.message)}}(0,n.h)([d,c,f]),(0,s.j)("c1a53f0f37ee773167b45a3bf6a61b76eb07c326",d),(0,s.j)("ab224d6a6aaea9fdd9ddb9b9a8c9dad0cd2e02f8",c),(0,s.j)("001837c49f82a4a4d75b3dc0964dc6c76e2d2b77",f)},10692:(e,t,a)=>{a.d(t,{t:()=>f});var s=a(43153),r=a(67096),i=a.n(r),l=a(12458),n=a(34413),d=a(85876),o=a(38387),c=a(88296);let u={adapter:(0,l.N)(c.db),providers:[(0,o.Z)({clientId:process.env.GITHUB_CLIENT_ID,clientSecret:process.env.GITHUB_CLIENT_SECRET}),(0,d.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}),(0,n.Z)({name:"credentials",credentials:{email:{label:"email",type:"text"},password:{label:"password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)throw Error("Invalid credentials");let t=await c.db.user.findUnique({where:{email:e.email}});if(!t||!t?.password||!await i().compare(e.password,t.password))throw Error("Invalid credentials");return t}})],callbacks:{session:async({token:e,session:t})=>(e&&(t.user.id=e.id,t.user.name=e.name,t.user.email=e.email),t),jwt:async({token:e,user:t})=>t?{...e,...t}:e},pages:{signIn:"/"},session:{strategy:"jwt"},secret:process.env.NEXTAUTH_SECRET},f=async()=>{let e=await (0,s.getServerSession)(u);return e?.user}},33408:(e,t,a)=>{a.d(t,{UM:()=>i});var s=a(73997),r=a(58544);s.Paj,s.f$3,s.sHf,s.dKE,s.Yfi,s.KfF,s.Nzl,s.eAf,s.Yqy,s.jsv,s.I4E,s.rhR,s.vc9,r.Q7H,s.Ys1,s.IB_,s.bVG,s.yEz,s.XG1,s.eVG,s.WKE,s.h9I,s.fC4;let i=16},57481:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(66621);let r=e=>[{type:"image/x-icon",sizes:"256x256",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};