"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{68184:function(e,t,l){var i=l(57437);l(2265);var s=l(25125),n=l(27648),a=l(38706);t.default=e=>{let{title:t,subtitle:l,showReset:r}=e,o=(0,a.T)("Empty"),c=null!=t?t:o("noExactMatches"),d=null!=l?l:o("tryChangeFilters");return(0,i.jsxs)("div",{className:" h-[60vh] flex flex-col gap-2 justify-center items-center",children:[(0,i.jsx)(s.Z,{center:!0,title:c,subtitle:d}),(0,i.jsx)("div",{className:"w-48 mt-4",children:r&&(0,i.jsx)(n.default,{href:"/",className:"bg-white border-[1px] border-gray-500 text-[#4e4e4e] rounded hover:opacity-80 transition ",children:o("removeAllFilters")})})]})}},31451:function(e,t,l){l.d(t,{default:function(){return p}});var i=l(57437),s=l(2265),n=l(48053),a=l(69064),r=l(52884),o=l(14123),c=l.n(o),d=l(80605),u=l(20698);l(83079);var f=l(12119);(0,f.$)("001837c49f82a4a4d75b3dc0964dc6c76e2d2b77"),(0,f.$)("c1a53f0f37ee773167b45a3bf6a61b76eb07c326");var x=(0,f.$)("ab224d6a6aaea9fdd9ddb9b9a8c9dad0cd2e02f8"),p=e=>{let{listingId:t,hasFavorited:l}=e,{status:o}=(0,d.useSession)(),[f,p]=(0,s.useState)(l),m=(0,s.useRef)(l),{mutate:h}=(0,r.D)({mutationFn:x,onError:()=>{m.current=!m.current,p(m.current),a.Am.error("Failed to favorite")}}),v=c()(()=>{h({listingId:t,favorite:m.current})},300),g=(0,s.useCallback)(()=>{v()},[]);return(0,i.jsxs)("button",{type:"button",onClick:e=>{if(e.stopPropagation(),e.preventDefault(),"authenticated"!==o){a.Am.error("Please sign in to favorite the listing!");return}g(),p(e=>!e),m.current=!m.current},className:" relative hover:opacity-80 transition cursor-pointer z-[5] ",children:[(0,i.jsx)(n.lo,{size:28,className:"   text-gray-50   absolute   -top-[2px]   -right-[2px]   "}),(0,i.jsx)(n.M_L,{size:24,className:(0,u.cn)(f?"fill-rose-500":"fill-neutral-500/70")})]})}},23610:function(e,t,l){var i=l(57437),s=l(2265),n=l(33145),a=l(20698);t.default=e=>{let{imageSrc:t,fill:l=!1,alt:r,className:o,priority:c=!1,effect:d,sizes:u}=e,[f,x]=(0,s.useState)(!1);return(0,i.jsx)(n.default,{fill:l,className:(0,a.cn)("transition duration-300","zoom"===d&&"scale-95",f?"opacity-100 scale-100":"opacity-0",o),src:t,alt:r,onLoad:()=>x(!0),priority:c,sizes:u,unoptimized:!0})}},28927:function(e,t,l){l.d(t,{T:function(){return _},default:function(){return L}});var i=l(57437),s=l(2265),n=l(27648),a=l(66009),r=l(41208),o=l(69234),c=l(38706),d=l(31451),u=l(23610),f=l(20698),x=l(32970),p=l(99376),m=l(52884),h=l(69064),v=l(78076),g=l(71151),b=l(97230),j=l(64392),y=l(57212),N=e=>{let{title:t,onConfirm:l,onCloseModal:s,isLoading:n=!1}=e;return(0,i.jsxs)("div",{className:" flex flex-col gap-3 px-6 py-8 relative",children:[(0,i.jsx)("button",{type:"button",className:" p-1 border-0  hover:opacity-70 transition absolute right-3 top-3",onClick:()=>null==s?void 0:s(),children:(0,i.jsx)(b.QAE,{size:20})}),(0,i.jsx)("h1",{className:"text-[22px] font-bold text-gray-800",children:t}),(0,i.jsx)("p",{className:"text-gray-700  text-[16px] leading-[1.6] mb-4",children:"Are you sure you want to do this? It can't be undone."}),(0,i.jsxs)("div",{className:"flex items-center gap-3 mt-1 h-[40px]",children:[(0,i.jsx)(j.Z,{onClick:()=>null==s?void 0:s(),className:"h-full",outline:!0,children:"Cancel"}),(0,i.jsx)(j.Z,{onClick:()=>{l(s)},className:"h-full flex items-center justify-center",children:n?(0,i.jsx)(y.Z,{}):(0,i.jsx)("span",{children:" Confirm"})})]})]})},w=l(66200),Z=l(30310),C=l(59255);let D={value:"DZ",label:"Algeria",flag:"\uD83C\uDDE9\uD83C\uDDFF"},P=e=>e?e.split(",").map(e=>e.trim()).filter(Boolean):[],z=e=>{var t;if(!e)return"";let l=C.find(t=>(null==t?void 0:t.nameFr)===e||(null==t?void 0:t.nameAr)===e);return null!==(t=null==l?void 0:l.code)&&void 0!==t?t:""};var F=e=>{let{listingId:t,onCloseModal:l}=e,[n,a]=(0,s.useTransition)(),[r,o]=(0,s.useState)(null);(0,s.useEffect)(()=>{a(async()=>{try{var e,i,s,n,a,r,c,d,u,f,x;let l=await (0,Z.Cy)(t),p=z(l.region),m=l.latitude,h=l.longitude,v="number"==typeof m&&"number"==typeof h;o({duration:null!==(e=l.duration)&&void 0!==e?e:"",category:null!==(i=l.category)&&void 0!==i?i:"",features:P(l.features),location:v&&l.region?{...D,label:null!==(s=l.country)&&void 0!==s?s:D.label,region:l.region,latlng:[m,h]}:null,wilayaCode:p,municipality:null!==(n=l.municipality)&&void 0!==n?n:"",address:null!==(a=l.address)&&void 0!==a?a:"",guestCount:null!==(r=l.guestCount)&&void 0!==r?r:1,bathroomCount:null!==(c=l.bathroomCount)&&void 0!==c?c:1,roomCount:null!==(d=l.roomCount)&&void 0!==d?d:1,image:null!==(u=l.imageSrc)&&void 0!==u?u:"",price:null!=l.price?String(l.price):"",title:null!==(f=l.title)&&void 0!==f?f:"",description:null!==(x=l.description)&&void 0!==x?x:""})}catch(e){h.ZP.error((null==e?void 0:e.message)||"Failed to load listing"),null==l||l()}})},[t,l]);let c=(0,s.useMemo)(()=>(0,i.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,i.jsx)(g.Z.WindowHeader,{title:"Edit property"}),(0,i.jsx)("div",{className:"p-6 flex items-center justify-center",children:(0,i.jsx)(y.Z,{})})]}),[]);return r?(0,i.jsx)(w.Z,{mode:"edit",listingId:t,initialValues:r,onCloseModal:l}):c};l(83079);var S=l(12119),E=(0,S.$)("db16f98a7dd509dc43fd9fb70035dab959baf639");(0,S.$)("cac5bff2370d361859fcb45ded3a18f9feb290ff"),(0,S.$)("578785c17f7947cb2d65472cb4242c57c8621203"),(0,S.$)("1106a624fc89780734d43596a1878891b0872f57"),(0,S.$)("84b639be183e082fba4d06c9dff2f39883927b92");var T=(0,S.$)("2ad9c02f7138be20aaff203fa989dbdd2c65d88f");let $={"/properties":"Delete property","/trips":"Cancel reservation","/reservations":"Cancel guest reservation"},k=e=>e?"/"===e?"/":e.replace(/\/+$/,""):"";var W=e=>{let{id:t}=e,l=k((0,p.usePathname)()),n=l.endsWith("/favorites"),a=l.endsWith("/properties"),r=l.endsWith("/trips"),o=l.endsWith("/reservations"),c=a?$["/properties"]:r?$["/trips"]:o?$["/reservations"]:"",{mutate:d}=(0,m.D)({mutationFn:E}),{mutate:u}=(0,m.D)({mutationFn:T}),[f,b]=(0,s.useTransition)();return"/"!==l&&!n&&(a||r||o)?(0,i.jsxs)(g.Z,{children:[(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(v.Z.Toggle,{id:"lisiting-menu",className:"w-10 h-10 flex items-center z-5 justify-center",children:(0,i.jsx)("button",{type:"button",className:"w-7 h-7 rounded-full bg-neutral-700/50 flex items-center justify-center hover:bg-neutral-700/70 group transition duration-200 z-[5]",children:(0,i.jsx)(x.evw,{className:"h-[18px] w-[18px] text-gray-300 transition duration-100 group-hover:text-gray-100 "})})}),(0,i.jsxs)(v.Z.List,{position:"bottom-left",className:"rounded-md",children:[a?(0,i.jsx)(g.Z.Trigger,{name:"edit-listing",children:(0,i.jsx)(v.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:"Edit property"})}):null,(0,i.jsx)(g.Z.Trigger,{name:"confirm-delete",children:(0,i.jsx)(v.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:c})})]})]}),a?(0,i.jsx)(g.Z.Window,{name:"edit-listing",children:(0,i.jsx)(F,{listingId:t})}):null,(0,i.jsx)(g.Z.Window,{name:"confirm-delete",children:(0,i.jsx)(N,{onConfirm:e=>{b(()=>{try{a?d(t,{onSuccess:()=>{null==e||e(),h.ZP.success("Listing successfully deleted!")}}):(r||o)&&u(t,{onSuccess:()=>{null==e||e(),h.ZP.success("Reservation successfully cancelled!")}})}catch(t){h.ZP.error("Oops! Something went wrong. Please try again later."),null==e||e()}})},title:c,isLoading:f})})]}):null},A=l(21099),L=e=>{let t,{data:l,reservation:s,hasFavorited:r}=e,x=(0,o.bU)(),p=(0,c.T)("Listing"),m=(0,c.T)("PurposeOptions"),h=s?s.totalPrice:null==l?void 0:l.price;if(s){let e=new Date(s.startDate),l=new Date(s.endDate);t="".concat((0,a.WU)(e,"PP")," - ").concat((0,a.WU)(l,"PP"))}let v=(()=>{let e=A.KP.find(e=>e.label===l.category);return e?m("".concat(e.id,".label")):l.category})();return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("div",{className:"absolute top-0 left-0 p-3 flex items-center justify-between w-full",children:[(0,i.jsx)("div",{className:"z-5",children:(0,i.jsx)(W,{id:(null==s?void 0:s.id)||l.id})}),(0,i.jsx)("div",{className:"w-[28px] h-[28px] flex items-center justify-center",children:(0,i.jsx)(d.default,{listingId:l.id,hasFavorited:r},l.id)})]}),(0,i.jsx)(n.default,{href:"/listings/".concat(l.id),className:"col-span-1 cursor-pointer",children:(0,i.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,i.jsx)("div",{className:" overflow-hidden md:rounded-xl rounded-md",children:(0,i.jsx)("div",{className:"aspect-[1/0.95] relative bg-gray-100",children:(0,i.jsx)(u.default,{imageSrc:l.imageSrc,fill:!0,alt:l.title,effect:"zoom",className:"object-cover",sizes:"100vw"})})}),(0,i.jsxs)("span",{className:"font-semibold text-[16px] mt-[4px]",children:[null==l?void 0:l.region,", ",null==l?void 0:l.country]}),(0,i.jsx)("span",{className:"font-light text-neutral-500 text-sm",children:t||v}),(0,i.jsxs)("div",{className:"flex flex-row items-baseline gap-1",children:[(0,i.jsxs)("span",{className:"font-bold text-[#444] text-[14px]",children:["DZD ",(0,f.T)(h,x)]}),!s&&(0,i.jsx)("span",{className:"font-light",children:p("night")})]})]})})]})};let _=()=>(0,i.jsx)("div",{className:"col-span-1 ",children:(0,i.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,i.jsx)(r.Z,{width:"100%",height:"100%",borderRadius:"12px",className:"aspect-square"}),(0,i.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,i.jsx)(r.Z,{height:"18px",width:"84px"}),(0,i.jsx)(r.Z,{height:"18px",width:"84px"})]}),(0,i.jsx)(r.Z,{height:"16px",width:"102px"}),(0,i.jsx)(r.Z,{height:"18px",width:"132px"})]})})}}]);