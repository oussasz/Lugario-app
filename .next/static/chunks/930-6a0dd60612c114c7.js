"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{68184:function(e,t,s){var r=s(57437);s(2265);var n=s(25125),l=s(27648),a=s(38706);t.default=e=>{let{title:t,subtitle:s,showReset:i}=e,c=(0,a.T)("Empty"),o=null!=t?t:c("noExactMatches"),d=null!=s?s:c("tryChangeFilters");return(0,r.jsxs)("div",{className:" h-[60vh] flex flex-col gap-2 justify-center items-center",children:[(0,r.jsx)(n.Z,{center:!0,title:o,subtitle:d}),(0,r.jsx)("div",{className:"w-48 mt-4",children:i&&(0,r.jsx)(l.default,{href:"/",className:"bg-white border-[1px] border-gray-500 text-[#4e4e4e] rounded hover:opacity-80 transition ",children:c("removeAllFilters")})})]})}},31451:function(e,t,s){s.d(t,{default:function(){return h}});var r=s(57437),n=s(2265),l=s(48053),a=s(69064),i=s(52884),c=s(14123),o=s.n(c),d=s(80605),u=s(20698);s(83079);var x=s(12119);(0,x.$)("001837c49f82a4a4d75b3dc0964dc6c76e2d2b77"),(0,x.$)("c1a53f0f37ee773167b45a3bf6a61b76eb07c326");var f=(0,x.$)("ab224d6a6aaea9fdd9ddb9b9a8c9dad0cd2e02f8"),h=e=>{let{listingId:t,hasFavorited:s}=e,{status:c}=(0,d.useSession)(),[x,h]=(0,n.useState)(s),m=(0,n.useRef)(s),{mutate:p}=(0,i.D)({mutationFn:f,onError:()=>{m.current=!m.current,h(m.current),a.Am.error("Failed to favorite")}}),v=o()(()=>{p({listingId:t,favorite:m.current})},300),g=(0,n.useCallback)(()=>{v()},[]);return(0,r.jsxs)("button",{type:"button",onClick:e=>{if(e.stopPropagation(),e.preventDefault(),"authenticated"!==c){a.Am.error("Please sign in to favorite the listing!");return}g(),h(e=>!e),m.current=!m.current},className:" relative hover:opacity-80 transition cursor-pointer z-[5] ",children:[(0,r.jsx)(l.lo,{size:28,className:"   text-gray-50   absolute   -top-[2px]   -right-[2px]   "}),(0,r.jsx)(l.M_L,{size:24,className:(0,u.cn)(x?"fill-rose-500":"fill-neutral-500/70")})]})}},23610:function(e,t,s){var r=s(57437),n=s(2265),l=s(33145),a=s(20698);t.default=e=>{let{imageSrc:t,fill:s=!1,alt:i,className:c,priority:o=!1,effect:d,sizes:u}=e,[x,f]=(0,n.useState)(!1);return(0,r.jsx)(l.default,{fill:s,className:(0,a.cn)("transition duration-300","zoom"===d&&"scale-95",x?"opacity-100 scale-100":"opacity-0",c),src:t,alt:i,onLoad:()=>f(!0),priority:o,sizes:u,unoptimized:!0})}},19899:function(e,t,s){s.d(t,{T:function(){return $},default:function(){return T}});var r=s(57437),n=s(2265),l=s(27648),a=s(66009),i=s(41208),c=s(69234),o=s(38706),d=s(31451),u=s(23610),x=s(20698),f=s(32970),h=s(99376),m=s(52884),p=s(69064),v=s(78076),g=s(71151),j=s(97230),b=s(64392),N=s(57212),y=e=>{let{title:t,onConfirm:s,onCloseModal:n,isLoading:l=!1}=e;return(0,r.jsxs)("div",{className:" flex flex-col gap-3 px-6 py-8 relative",children:[(0,r.jsx)("button",{type:"button",className:" p-1 border-0  hover:opacity-70 transition absolute right-3 top-3",onClick:()=>null==n?void 0:n(),children:(0,r.jsx)(j.QAE,{size:20})}),(0,r.jsx)("h1",{className:"text-[22px] font-bold text-gray-800",children:t}),(0,r.jsx)("p",{className:"text-gray-700  text-[16px] leading-[1.6] mb-4",children:"Are you sure you want to do this? It can't be undone."}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-1 h-[40px]",children:[(0,r.jsx)(b.Z,{onClick:()=>null==n?void 0:n(),className:"h-full",outline:!0,children:"Cancel"}),(0,r.jsx)(b.Z,{onClick:()=>{s(n)},className:"h-full flex items-center justify-center",children:l?(0,r.jsx)(N.Z,{}):(0,r.jsx)("span",{children:" Confirm"})})]})]})};s(83079);var w=s(12119),Z=(0,w.$)("db16f98a7dd509dc43fd9fb70035dab959baf639");(0,w.$)("cac5bff2370d361859fcb45ded3a18f9feb290ff"),(0,w.$)("578785c17f7947cb2d65472cb4242c57c8621203"),(0,w.$)("1106a624fc89780734d43596a1878891b0872f57"),(0,w.$)("84b639be183e082fba4d06c9dff2f39883927b92");var P=(0,w.$)("2ad9c02f7138be20aaff203fa989dbdd2c65d88f");let C={"/properties":"Delete property","/trips":"Cancel reservation","/reservations":"Cancel guest reservation"};var F=e=>{let{id:t}=e,s=(0,h.usePathname)(),{mutate:l}=(0,m.D)({mutationFn:Z}),{mutate:a}=(0,m.D)({mutationFn:P}),[i,c]=(0,n.useTransition)();return"/"===s||"/favorites"===s?null:(0,r.jsxs)(g.Z,{children:[(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(v.Z.Toggle,{id:"lisiting-menu",className:"w-10 h-10 flex items-center z-5 justify-center",children:(0,r.jsx)("button",{type:"button",className:"w-7 h-7 rounded-full bg-neutral-700/50 flex items-center justify-center hover:bg-neutral-700/70 group transition duration-200 z-[5]",children:(0,r.jsx)(f.evw,{className:"h-[18px] w-[18px] text-gray-300 transition duration-100 group-hover:text-gray-100 "})})}),(0,r.jsx)(v.Z.List,{position:"bottom-left",className:"rounded-md",children:(0,r.jsx)(g.Z.Trigger,{name:"confirm-delete",children:(0,r.jsx)(v.Z.Button,{className:"text-[14px] rounded-md font-semibold py-[10px] hover:bg-neutral-100 transition",children:C[s]})})})]}),(0,r.jsx)(g.Z.Window,{name:"confirm-delete",children:(0,r.jsx)(y,{onConfirm:e=>{c(()=>{try{"/properties"===s?l(t,{onSuccess:()=>{null==e||e(),p.ZP.success("Listing successfully deleted!")}}):("/trips"===s||"/reservations"===s)&&a(t,{onSuccess:()=>{null==e||e(),p.ZP.success("Reservation successfully cancelled!")}})}catch(t){p.ZP.error("Oops! Something went wrong. Please try again later."),null==e||e()}})},title:C[s],isLoading:i})})]})},z=s(21099),T=e=>{let t,{data:s,reservation:n,hasFavorited:i}=e,f=(0,c.bU)(),h=(0,o.T)("Listing"),m=(0,o.T)("PurposeOptions"),p=n?n.totalPrice:null==s?void 0:s.price;if(n){let e=new Date(n.startDate),s=new Date(n.endDate);t="".concat((0,a.WU)(e,"PP")," - ").concat((0,a.WU)(s,"PP"))}let v=(()=>{let e=z.KP.find(e=>e.label===s.category);return e?m("".concat(e.id,".label")):s.category})();return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"absolute top-0 left-0 p-3 flex items-center justify-between w-full",children:[(0,r.jsx)("div",{className:"z-5",children:(0,r.jsx)(F,{id:(null==n?void 0:n.id)||s.id})}),(0,r.jsx)("div",{className:"w-[28px] h-[28px] flex items-center justify-center",children:(0,r.jsx)(d.default,{listingId:s.id,hasFavorited:i},s.id)})]}),(0,r.jsx)(l.default,{href:"/listings/".concat(s.id),className:"col-span-1 cursor-pointer",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,r.jsx)("div",{className:" overflow-hidden md:rounded-xl rounded-md",children:(0,r.jsx)("div",{className:"aspect-[1/0.95] relative bg-gray-100",children:(0,r.jsx)(u.default,{imageSrc:s.imageSrc,fill:!0,alt:s.title,effect:"zoom",className:"object-cover",sizes:"100vw"})})}),(0,r.jsxs)("span",{className:"font-semibold text-[16px] mt-[4px]",children:[null==s?void 0:s.region,", ",null==s?void 0:s.country]}),(0,r.jsx)("span",{className:"font-light text-neutral-500 text-sm",children:t||v}),(0,r.jsxs)("div",{className:"flex flex-row items-baseline gap-1",children:[(0,r.jsxs)("span",{className:"font-bold text-[#444] text-[14px]",children:["$ ",(0,x.T)(p,f)]}),!n&&(0,r.jsx)("span",{className:"font-light",children:h("night")})]})]})})]})};let $=()=>(0,r.jsx)("div",{className:"col-span-1 ",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,r.jsx)(i.Z,{width:"100%",height:"100%",borderRadius:"12px",className:"aspect-square"}),(0,r.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,r.jsx)(i.Z,{height:"18px",width:"84px"}),(0,r.jsx)(i.Z,{height:"18px",width:"84px"})]}),(0,r.jsx)(i.Z,{height:"16px",width:"102px"}),(0,r.jsx)(i.Z,{height:"18px",width:"132px"})]})})},35248:function(e,t,s){s.d(t,{default:function(){return o}});var r=s(57437),n=s(2265),l=s(36766),a=s(38706),i=s(19899);let c=(e,t,s,r)=>{let l=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let n=new IntersectionObserver(n=>{n[0].isIntersecting&&!s&&t&&!r&&e()},{root:null,rootMargin:"240px",threshold:.1});return l.current&&n.observe(l.current),()=>n.disconnect()},[t,r,s,e]),{ref:l}};var o=e=>{let{nextCursor:t,fnArgs:s,queryFn:o,queryKey:d,favorites:u}=e,x=(0,a.T)("Errors"),{data:f,isFetchingNextPage:h,hasNextPage:m,status:p,fetchNextPage:v}=(0,l.N)({queryFn:e=>{let{pageParam:r=t}=e;return o({...s,cursor:r})},queryKey:d,getNextPageParam:e=>null==e?void 0:e.nextCursor}),{ref:g}=c(v,m,"loading"===p||h,"error"===p);return(0,r.jsxs)(r.Fragment,{children:[null==f?void 0:f.pages.map((e,t)=>{var s;return(0,r.jsx)(n.Fragment,{children:null==e?void 0:null===(s=e.listings)||void 0===s?void 0:s.map(e=>{var t;let s=u.includes(e.id);return(0,r.jsx)(i.default,{data:e,hasFavorited:s,reservation:null==e?void 0:e.reservation},(null==e?void 0:null===(t=e.reservation)||void 0===t?void 0:t.id)||e.id)})},t)}),("loading"===p||h)&&(0,r.jsx)(r.Fragment,{children:Array.from({length:4}).map((e,t)=>(0,r.jsx)(i.T,{},t))}),"error"===p&&(0,r.jsx)("p",{className:"text-xl mt-8 text-center font-semibold",children:x("somethingWentWrong")}),(0,r.jsx)("div",{ref:g})]})}}}]);